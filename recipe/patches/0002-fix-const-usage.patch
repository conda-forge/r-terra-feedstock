From 9d8155b4fe919a373b747500e21d665976b4f12b Mon Sep 17 00:00:00 2001
From: Daniel Nachun <daniel.nachun@gmail.com>
Date: Sat, 5 Oct 2024 21:57:49 -0700
Subject: [PATCH 2/2] fix const usage

---
 src/Makevars.in   | 1 +
 src/Makevars.ucrt | 1 +
 src/NA.h          | 2 +-
 3 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/src/Makevars.in b/src/Makevars.in
index d4e1c72..08eb72f 100644
--- a/src/Makevars.in
+++ b/src/Makevars.in
@@ -1,3 +1,4 @@
 PKG_CPPFLAGS=@PKG_CPPFLAGS@
 PKG_LIBS=@PKG_LIBS@
 CXX_STD=CXX
+PKG_CXXFLAGS = -Wno-static-float-init -fpermissive
diff --git a/src/Makevars.ucrt b/src/Makevars.ucrt
index e0f5d5e..cd3196d 100644
--- a/src/Makevars.ucrt
+++ b/src/Makevars.ucrt
@@ -1,2 +1,3 @@
 PKG_LIBS = -L$(LIBRARY_LIB) -lgdal -lgeos -lgeos_c -lproj
 PKG_CPPFLAGS = -I$(LIBRARY_INC)
+PKG_CXXFLAGS = -Wno-static-float-init
diff --git a/src/NA.h b/src/NA.h
index 205cde7..a3f73ce 100644
--- a/src/NA.h
+++ b/src/NA.h
@@ -22,7 +22,7 @@
 template <class T> 
 class NA {
   public:
-    static constexpr T value = std::is_floating_point<T>::value ? NAN : std::numeric_limits<T>::min();
+    static const T value = std::is_floating_point<T>::value ? NAN : std::numeric_limits<T>::min();
 };
 
 // bool has no NA
-- 
2.45.2

